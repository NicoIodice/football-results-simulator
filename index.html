<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Critical Cup 2025: Solidarity Football Tournament</title>
    <link rel="icon" type="image/x-icon" href="./assets/favicon.png">
    <link rel="apple-touch-icon" href="./assets/favicon-app.png">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Critical Cup 2025</h1>
            <p>Solidarity Football Tournament</p>
        </header>

        <nav class="tabs">
            <button class="tab-button active" onclick="showTab('standings')">Standings</button>
            <button class="tab-button" onclick="showTab('teams')">Teams</button>
            <button class="tab-button" onclick="showTab('fixtures')">Fixtures</button>
            <button class="tab-button" onclick="showTab('simulator')">Simulator</button>
            <button class="tab-button" onclick="showTab('forecast')">Forecast</button>
        </nav>

        <main>
            <!-- Standings Tab -->
            <div id="standings" class="tab-content active">
                <h2>League Standings</h2>
                <div class="group-selector">
                    <label for="selected-group">Select Group:</label>
                    <select id="selected-group" onchange="updateStandingsForGroup()">
                        <!-- Groups will be populated by JavaScript -->
                    </select>
                </div>
                <div class="table-container">
                    <table id="standings-table">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Team</th>
                                <th>Matches</th>
                                <th>W-L-D</th>
                                <th title="Total goals scored minus goals given up">Goals Diff (TB1)</th>
                                <th title="Number of total goals scored per team">Total Goals (TB2)</th>
                                <th title="The highest number of points obtained by the tied teams in the matches they played against each other">Head-to-Head (TB3)</th>
                                <th>Match History</th>
                                <th>Points</th>
                            </tr>
                        </thead>
                        <tbody id="standings-body">
                            <!-- Standings will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Teams Tab -->
            <div id="teams" class="tab-content">
                <h2>Team Lineup & Squad</h2>
                <div class="team-selector">
                    <label for="selected-team-lineup">Select Team:</label>
                    <select id="selected-team-lineup" onchange="updateTeamLineup()">
                        <!-- Teams will be populated by JavaScript -->
                    </select>
                </div>
                
                <div class="tactics-selector">
                    <label for="selected-tactics">Formation:</label>
                    <select id="selected-tactics" onchange="updateFormation()">
                        <!-- Tactics will be populated by JavaScript -->
                    </select>
                </div>
                
                <div id="team-lineup-content">
                    <div class="football-field">
                        <!-- Goalkeeper Area -->
                        <div class="goalkeeper-area">
                            <div class="goal">
                                <div class="goalkeeper-position">
                                    <div id="goalkeeper" class="player-icon goalkeeper">
                                        <span class="player-number">1</span>
                                    </div>
                                    <div id="goalkeeper-name" class="player-name">Goalkeeper</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Field Players Area -->
                        <div class="field-players">
                            <div class="formation-line defense">
                                <div class="player-position" id="position-2">
                                    <div class="player-icon defender">
                                        <span class="player-number">2</span>
                                    </div>
                                    <div class="player-name">Defender</div>
                                </div>
                                <div class="player-position" id="position-3">
                                    <div class="player-icon defender">
                                        <span class="player-number">3</span>
                                    </div>
                                    <div class="player-name">Defender</div>
                                </div>
                                <div class="player-position" id="position-8" style="display: none;">
                                    <div class="player-icon defender">
                                        <span class="player-number">8</span>
                                    </div>
                                    <div class="player-name">Defender</div>
                                </div>
                                <div class="player-position" id="position-9" style="display: none;">
                                    <div class="player-icon defender">
                                        <span class="player-number">9</span>
                                    </div>
                                    <div class="player-name">Defender</div>
                                </div>
                            </div>
                            
                            <div class="formation-line midfield">
                                <div class="player-position" id="position-4">
                                    <div class="player-icon midfielder">
                                        <span class="player-number">4</span>
                                    </div>
                                    <div class="player-name">Midfielder</div>
                                </div>
                                <div class="player-position" id="position-6" style="display: none;">
                                    <div class="player-icon midfielder">
                                        <span class="player-number">6</span>
                                    </div>
                                    <div class="player-name">Midfielder</div>
                                </div>
                                <div class="player-position" id="position-10" style="display: none;">
                                    <div class="player-icon midfielder">
                                        <span class="player-number">10</span>
                                    </div>
                                    <div class="player-name">Midfielder</div>
                                </div>
                                <div class="player-position" id="position-11" style="display: none;">
                                    <div class="player-icon midfielder">
                                        <span class="player-number">11</span>
                                    </div>
                                    <div class="player-name">Midfielder</div>
                                </div>
                            </div>
                            
                            <div class="formation-line attack">
                                <div class="player-position" id="position-5">
                                    <div class="player-icon forward">
                                        <span class="player-number">5</span>
                                    </div>
                                    <div class="player-name">Forward</div>
                                </div>
                                <div class="player-position" id="position-7" style="display: none;">
                                    <div class="player-icon forward">
                                        <span class="player-number">7</span>
                                    </div>
                                    <div class="player-name">Forward</div>
                                </div>
                                <div class="player-position" id="position-12" style="display: none;">
                                    <div class="player-icon forward">
                                        <span class="player-number">12</span>
                                    </div>
                                    <div class="player-name">Forward</div>
                                </div>
                                <div class="player-position" id="position-13" style="display: none;">
                                    <div class="player-icon forward">
                                        <span class="player-number">13</span>
                                    </div>
                                    <div class="player-name">Forward</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Center Circle -->
                        <div class="center-circle"></div>
                        
                        <!-- Field Lines -->
                        <div class="field-lines">
                            <div class="enemy-goal-area"></div>
                            <div class="penalty-spot enemy-penalty"></div>
                            <div class="enemy-penalty-arc"></div>
                            <div class="penalty-area"></div>
                            <div class="penalty-spot player-penalty"></div>
                            <div class="goal-area"></div>
                        </div>
                    </div>
                    
                    <!-- Bench Area -->
                    <div class="bench-area">
                        <h3>🪑 Bench</h3>
                        <div id="bench-players" class="bench-players">
                            <!-- Bench players will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Fixtures Tab -->
            <div id="fixtures" class="tab-content">
                <h2>Fixtures & Results</h2>
                
                <!-- Today's Games Header Card -->
                <div id="todays-games-header" class="todays-games-card" style="display: none;">
                    <h3>🏆 Today's Matches</h3>
                    <div id="todays-games-list"></div>
                </div>
                
                <!-- Fixtures Controls -->
                <div class="fixtures-controls">
                    <div class="control-row">
                        <div class="checkbox-control">
                            <label for="show-all-fixtures">
                                <input type="checkbox" id="show-all-fixtures" onchange="toggleAllFixtures()">
                                Show All Fixtures
                            </label>
                        </div>
                        <div class="group-selector">
                            <label for="fixtures-group-select">Group:</label>
                            <select id="fixtures-group-select" onchange="updateFixturesForGroup()">
                                <!-- Groups will be populated by JavaScript -->
                            </select>
                        </div>
                    </div>
                </div>
                
                <div id="fixtures-content">
                    <!-- Fixtures will be populated by JavaScript -->
                </div>
            </div>

            <!-- Simulator Tab -->
            <div id="simulator" class="tab-content">
                <h2>Championship Simulator</h2>
                <div class="simulator-controls">
                    <div class="team-selector">
                        <label for="selected-team">Select Team to Analyze:</label>
                        <select id="selected-team" onchange="updateSimulation()">
                            <!-- Teams will be populated by JavaScript -->
                        </select>
                    </div>
                </div>
                
                <div id="simulation-results">
                    <!-- Simulation results will be populated by JavaScript -->
                </div>
            </div>

            <!-- Forecast Tab -->
            <div id="forecast" class="tab-content">
                <h2>🔮 Championship Forecast & Predictions</h2>
                <div class="forecast-description">
                    <p>AI-powered predictions based on team performance, form, consistency, and statistical analysis.</p>
                </div>
                
                <!-- Forecast Controls -->
                <div class="forecast-controls">
                    <div class="control-row">
                        <div class="group-selector">
                            <label for="forecast-group-select">Group:</label>
                            <select id="forecast-group-select" onchange="updateForecastForGroup()">
                                <!-- Groups will be populated by JavaScript -->
                            </select>
                        </div>
                    </div>
                </div>
                
                <div id="forecast-content">
                    <!-- Forecast content will be populated by JavaScript -->
                </div>
            </div>
        </main>
    </div>

    <!-- Add Result Modal -->
    <div id="addResultModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Match Result</h3>
                <span class="close-modal" onclick="hideAddResultModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="match-info">
                    <p><strong>Match:</strong> <span id="modal-teams"></span></p>
                    <p><strong>Date & Time:</strong> <span id="modal-datetime"></span></p>
                </div>
                <form id="addResultForm" onsubmit="submitResult(event)">
                    <div class="score-inputs">
                        <div class="team-score">
                            <label for="homeScore" id="homeTeamLabel"></label>
                            <input type="number" id="homeScore" min="0" max="99" required>
                        </div>
                        <div class="vs-separator">VS</div>
                        <div class="team-score">
                            <label for="awayScore" id="awayTeamLabel"></label>
                            <input type="number" id="awayScore" min="0" max="99" required>
                        </div>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" onclick="hideAddResultModal()">Cancel</button>
                        <button type="submit" class="btn-primary">Add Result</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <!-- Loading Mask for OpenAI SDK -->
    <div id="openai-loading-mask" class="loading-mask hide">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <div class="loading-text">
                <h3>🤖 Initializing AI Engine</h3>
                <p>Loading OpenAI SDK for advanced analysis...</p>
                <div class="loading-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="loading-progress-fill"></div>
                    </div>
                    <span class="progress-text" id="loading-progress-text">0%</span>
                </div>
            </div>
        </div>
    </div>

    <!-- OpenAI SDK -->
    <!--<script src="https://cdn.jsdelivr.net/npm/openai@4.0.0/dist/openai.min.js"></script>-->
    <script src="script.js"></script>
</body>
</html>